<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <link rel="stylesheet" type="text/css" href="css/stylesheet.css">
        <link rel="stylesheet" type="text/css" href="css/bootstrap.css">

        <script src="js/libs/jquery.js"></script>
        <script src="js/libs/jquery.cookie.js"></script>
        <script src="js/libs/handlebars.js"></script>
        <script src="js/libs/underscore.js"></script>
        <script src="js/libs/oauth.js"></script>

        <script src="js/libs/ember.js"></script>
        <script src="js/libs/ember-data.js"></script>

        <script src="js/app/app.js"></script>
        <script src="js/app/prototype_extensions.js"></script>
        <script src="js/app/handlebars_utils.js"></script>

        <script src="js/app/mixins/scrolling_mixin.js"></script>

        <script src="js/app/utils/auth_manager_util.js"></script>

        <script src="js/app/routes/router.js"></script>
        <script src="js/app/routes/dashboard_route.js"></script>
        <script src="js/app/routes/single_blog_route.js"></script>
        <script src="js/app/routes/application_route.js"></script>

        <script src="js/app/data_utils/store.js"></script>
        <script src="js/app/data_utils/transforms.js"></script>
        <script src="js/app/data_utils/adapter.js"></script>
        <script src="js/app/data_utils/serializer.js"></script>

        <script src="js/app/models/post_model.js"></script>
        <script src="js/app/models/photo_model.js"></script>
        <script src="js/app/models/sub_photo_model.js"></script>
        <script src="js/app/models/sub_photo_instance_model.js"></script>
        <script src="js/app/models/quote_model.js"></script>
        <script src="js/app/models/text_model.js"></script>
        <script src="js/app/models/video_model.js"></script>

        <script src="js/app/controllers/application_controller.js"></script>
        <script src="js/app/controllers/dashboard_controller.js"></script>
        <script src="js/app/controllers/single_blog_controller.js"></script>

        <script src="js/app/views/dashboard_view.js"></script>
        <script src="js/app/views/single_blog_view.js"></script>

        <script type="text/x-handlebars">
            <div class="container">
                {{partial 'header'}}

                {{outlet 'main'}}
            </div>
        </script>

        <script type="text/x-handlebars" data-template-name="_header">
            <header class="row col-lg-12">
                <h1>
                    Tumblr Ember

                    {{#if controller.metadata.title}}
                        - {{controller.metadata.title}}
                    {{/if}}
                </h1>

                <nav>
                    {{#link-to 'dashboard' class="btn btn-primary"}}Home{{/link-to}}
                    {{#if isAuthenticated}}
                        <button {{action "logout"}} class="btn btn-primary">Logout</button>
                    {{else}}
                        <button {{action "auth"}} class="btn btn-primary">Auth</button>
                    {{/if}}
                </nav>
            </header>
        </script>

        <script type="text/x-handlebars" data-template-name="authenticate">
            <div class="row col-lg-12 well well-lg">
                <button {{action "auth"}} class="btn btn-primary btn-large">
                    Authenticate
                </button>
            </div>
        </script>

        <script type="text/x-handlebars" data-template-name="loading_route">
            <div class="row col-lg-12 well well-lg">
                <h1>
                    Loading...
                </h1>
            </div>
        </script>

        <script type="text/x-handlebars" data-template-name="_loading_posts">
            <div {{bind-attr class="isLoading::display_none"}}>
                <footer class="row col-lg-12">
                    <h2 class="inner">
                        Loading...
                    </h2>
                </footer>
            </div>
        </script>

        <script type="text/x-handlebars" data-template-name="post_stream">
            {{#each post in controller}}
                <div class="post row col-lg-12 well well-lg">
                    {{partial 'post'}}
                </div>
            {{/each}}

            {{partial 'loading_posts'}}
        </script>

        <script type="text/x-handlebars" data-template-name="_post">
            {{! this amounts to a switch case }}
            {{#if post.is.photo}}
                {{partial 'photoset'}}
            {{/if}}

            {{#if post.is.quote}}
                {{partial 'quote'}}
            {{/if}}

            {{#if post.is.video}}
                {{partial 'video'}}
            {{/if}}

            {{#if post.is.text}}
                {{partial 'text'}}
            {{/if}}

            {{#if post.is.answer}}
                {{partial 'text'}}
            {{/if}}

            {{#if post.is.audio}}
                {{partial 'audio'}}
            {{/if}}

            {{#if post.is.chat}}
                {{partial 'chat'}}
            {{/if}}
        </script>

        <script type="text/x-handlebars" data-template-name="_photoset">
            <div>
             {{!bind-attr style=post.widthString}}
                {{#each row in post.sized_rows}}
                    <div>
                        {{#each sub_photo in row.content}}
                            <img {{bind-attr src=sub_photo.url
                                             width=sub_photo.width
                                             style=row.widthString}}
                                ></img>
                                {{! height=sub_photo.height}}
                            {{caption}}
                        {{/each}}
                    </div>
                {{/each}}
                <p>
                    {{{post.caption}}}
                </p>
            </div>
        </script>

        <script type="text/x-handlebars" data-template-name="_text">
            <p>
                <h3>{{{post.title}}}</h3>
                {{{post.body}}}
            </p>
        </script>

        <script type="text/x-handlebars" data-template-name="_video">
            {{{post.video.embed_code}}}
            {{{post.caption}}}
        </script>

        <script type="text/x-handlebars" data-template-name="_quote">
            <figure class="quote">
                <blockquote>
                    {{{post.text}}}
                </blockquote>
                <figcaption class="quote-author">
                    {{{post.source}}}
                </figcaption>
            </figure>
        </script>

        <script type="text/x-handlebars" data-template-name="_answer">
            <div>
                <div>
                    <strong>
                        <a {{bind-attr src=post.asking_url}}>
                            {{post.asking_name}}:
                        </a>
                    </strong>
                    {{question}}
                </div>

                <div>
                    <strong>
                        {{post.blog_name}}:
                    </strong>
                    {{answer}}
                </div>
            </div>
        </script>

        <script type="text/x-handlebars" data-template-name="_audio">
            <div>
                <figure class="audio">
                    <blockquote>
                        {{{post.player}}}
                    </blockquote>
                    <figcaption class="audio-caption">
                        {{post.caption}}
                    </figcaption>
                </figure>
                <div>
                    <strong>plays:</strong> {{post.plays}}<br/>
                    <strong>album_art:</strong> {{post.album_art}}<br/>
                    <strong>artist:</strong> {{post.artist}}<br/>
                    <strong>album:</strong> {{post.album}}<br/>
                    <strong>track_name:</strong> {{post.track_name}}<br/>
                    <strong>track_number:</strong> {{post.track_number}}<br/>
                    <strong>year:</strong> {{post.year}}<br/>
                </div>
            </div>
        </script>

        <script type="text/x-handlebars" data-template-name="_chat">
            <div>
                <h3>{{post.title}}</h3>
                <p>
                    {{{post.body}}}
                </p>

                <ul>
                    {{#for message in post.dialogue}}
                    <li>
                        <span {{bind-attr title=message.label}}>
                            {{post.name}}
                        </span>
                        {{message.phrase}}

                    </li>
                    {{/for}}
                </ul>
            </div>
        </script>


    </head>
    <body>
    </body>
</html>
